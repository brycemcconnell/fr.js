let mouseDown=!1;const CONTROLS={mouse:!1,mouselook:!0,xmove:!0,zmove:!0,ymove:!0,jump:!0,mouselock:!0};function initControls(){window.addEventListener('keydown',function(a){CONTROLS.xmove&&('d'==a.key?(a.preventDefault(),velocity.x=.05):'a'==a.key&&(a.preventDefault(),velocity.x=-.05)),CONTROLS.zmove&&('s'==a.key?(a.preventDefault(),velocity.z=.05):'w'==a.key&&(a.preventDefault(),velocity.z=-.05)),CONTROLS.ymove&&('q'==a.key?(a.preventDefault(),velocity.y=.05):'z'==a.key&&(a.preventDefault(),velocity.y=-.05)),CONTROLS.jump&&' '==a.key&&!jumping&&(a.preventDefault(),jumping=!0,jumpVelocity=.1)}),window.addEventListener('keyup',function(a){('a'==a.key||'d'==a.key)&&(velocity.x=0),('w'==a.key||'s'==a.key)&&(velocity.z=0),('q'==a.key||'z'==a.key)&&(velocity.y=0)}),window.addEventListener('mousedown',function(){CONTROLS.mouse&&(mouseDown=!0)}),window.addEventListener('mouseup',function(){mouseDown=!1}),window.addEventListener('mousemove',function(a){CONTROLS.mouselook&&document.pointerLockElement&&(camera.rotation.x-=a.movementY/1e3,camera.rotation.y-=a.movementX/1e3)})}function toRads(a){return a*(180/Math.PI)}function toDegs(a){return a*(Math.PI/180)}function angleToCircle(a){return a%360}function modulo(a,b){return(a%b+b)%b}function getCardinal(a){a=modulo(a,360);let b=Math.round(a/45);b%=8;let c=b-1;c=(Math.abs(c)+8)%8;let d;switch(b){case 0:d='North';break;case 7:d='North-west';break;case 6:d='West';break;case 5:d='South-west';break;case 4:d='South';break;case 3:d='South-east';break;case 2:d='East';break;case 1:d='North-east';break;default:d='unknown';}return d}module.exports.getCardinal=getCardinal;function line(a,b,c,d){ctx.beginPath(),ctx.moveTo(a,b),ctx.lineTo(c,d),ctx.stroke(),ctx.closePath()}function clamp(a,b,c){return Math.min(Math.max(a,b),c)}function random(a,b){return null==b&&(b=0),Math.round(Math.random()*(a-b)+b)}function getMousePosition(a,b){const c=a.getBoundingClientRect();return{x:(b.clientX-c.left)*(a.width/c.width),y:(b.clientY-c.top)*(a.height/c.height)}}function compareKey(c,d){return d=null==d?1:d,function(e,a){let b=e[c]<a[c]?-1:e[c]>a[c]?1:0;return b*d}}function normalize(a,b,c){return(a-c)/(b-c)}
